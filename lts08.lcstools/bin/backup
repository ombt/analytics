#!/usr/bin/ksh
# stupid backup
if [[ "${1}" == "-d" ]]
then
	backupdir=${2:-"BACKUPD"}/$(date '+%y%m%d%H%M')
else
	backupdir=${1:-"BACKUP"}
fi
#
echo "backup into directory ${backupdir} ..."
#
[ ! -d ${backupdir} ] && mkdir -p ${backupdir};
#
if [[ "${1}" == "-d" ]]
then
	for dir in BACKUP[0-9][0-9]*
	do
		if [[ -d "${dir}" ]]
		then
			mv $dir BACKUPD
		fi
	done
fi
#
for file in *.cgi *.tcl *.TCL *.sh *.java *.[chly] make.in *.ini *.pl *.pm *.PL *.PM *.cxx *.cpp *.cc *.exp *.hpp 
do
	if [ -r "${file}" ]
	then
		echo "cp ${file} ${backupdir}"
		cp ${file} ${backupdir}
	fi
done
#
exit 0
