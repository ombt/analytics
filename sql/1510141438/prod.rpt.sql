--  production_reports_npm_by_board report_id
--  production_reports_npm_by_board total
--  production_reports_npm_by_board actual
--  production_reports_npm_by_board board
--  production_reports_npm_by_board pboard
--  production_reports_npm_by_board module
--  production_reports_npm_by_board hsup
--  production_reports_npm_by_board clean
--  production_reports_npm_by_board brec
--  production_reports_npm_by_board maintenance
--  production_reports_npm_by_board ope_rate
--  production_reports_npm_by_board pickup_rate
--  production_reports_npm_by_board mount_rate
--  production_reports_npm_by_board mount
--  production_reports_npm_by_board recog_err1
--  production_reports_npm_by_board recog_err2
--  production_reports_npm_by_board floortemp
--  production_reports_npm_by_board floorhumid
--  production_reports_npm_by_board mctemp
--  production_reports_npm_by_board mchumid
--  production_reports_npm_by_board thermostatus
--  production_reports_npm_by_board waitt
--  production_reports_npm_by_board poweron
--  production_reports_npm_by_board change
--  production_reports_npm_by_board prodview
--  production_reports_npm_by_board mente
--  production_reports_npm_by_board dataedit
--  production_reports_npm_by_board unitadjust
--  production_reports_npm_by_board idle
--  production_reports_npm_by_board load
--  production_reports_npm_by_board breg
--  production_reports_npm_by_board tpickup
--  production_reports_npm_by_board tpmiss
--  production_reports_npm_by_board trmiss
--  production_reports_npm_by_board tdmiss
--  production_reports_npm_by_board tmmiss
--  production_reports_npm_by_board thmiss
--  production_reports_npm_by_board timestamp
--  production_reports_npm_by_board prod_time
--  production_reports_npm_by_board brcg_time
--  production_reports_npm_by_board othrstop_time
--  production_reports_npm_by_board mhrcgstop_time
--  production_reports_npm_by_board cperr_time
--  production_reports_npm_by_board otherlstop_time
--  production_reports_npm_by_board bndstop_time
--  production_reports_npm_by_board mcfwait_time
--  production_reports_npm_by_board mcrwait_time
--  production_reports_npm_by_board fwait_time
--  production_reports_npm_by_board rwait_time
--  production_reports_npm_by_board swait_time
--  production_reports_npm_by_board cwait_time
--  production_reports_npm_by_board bwait_time
--  production_reports_npm_by_board pwait_time
--  production_reports_npm_by_board scstop_time
--  production_reports_npm_by_board scestop_time
--  production_reports_npm_by_board cnvstop_time
--  production_reports_npm_by_board brcgstop_time
--  production_reports_npm_by_board trbl_time
--  production_reports_npm_by_board fbstop_time
--  production_reports_npm_by_board bndrcgstop_time
--  production_reports_npm_by_board crerr_time
--  production_reports_npm_by_board cderr_time
--  production_reports_npm_by_board cmerr_time
--  production_reports_npm_by_board cterr_time
--  production_reports_npm_by_board trserr_time
--  production_reports_npm_by_board prdstop_time
--  production_reports_npm_by_board judgestop_time
--  production_reports_npm_by_board mount_time
--  production_reports_npm_by_board total_time
--  production_reports_npm_by_board caerr_time
--  production_reports_npm_by_board cpwait_time
--  production_reports_npm_by_board mskrecerrstop_time
--  production_reports_npm_by_board mskpstrecerrstop_time
--  production_reports_npm_by_board bprcgstop_time
--  production_reports_npm_by_board sothrstop_time
--  production_reports_npm_by_board pcustop_time
--  production_reports_npm_by_board bestop_time
--  production_reports_npm_by_board twait_time
--  production_reports_npm_by_board hcwait_time
--  production_reports_npm_by_board hswait_time
--  production_reports_npm_by_board pstrecerrstop_time
--  production_reports_npm_by_board solvnonstop_time
--  production_reports_npm_by_board fwait_count
--  production_reports_npm_by_board rwait_count
--  production_reports_npm_by_board swait_count
--  production_reports_npm_by_board cwait_count
--  production_reports_npm_by_board bwait_count
--  production_reports_npm_by_board pwait_count
--  production_reports_npm_by_board scstop_count
--  production_reports_npm_by_board scestop_count
--  production_reports_npm_by_board othrstop_count
--  production_reports_npm_by_board cnvstop_count
--  production_reports_npm_by_board brcgstop_count
--  production_reports_npm_by_board trbl_count
--  production_reports_npm_by_board mhrcgstop_count
--  production_reports_npm_by_board fbstop_count
--  production_reports_npm_by_board bndrcgstop_count
--  production_reports_npm_by_board cperr_count
--  production_reports_npm_by_board crerr_count
--  production_reports_npm_by_board cderr_count
--  production_reports_npm_by_board cmerr_count
--  production_reports_npm_by_board cterr_count
--  production_reports_npm_by_board trserr_count
--  production_reports_npm_by_board trsmiss_count
--  production_reports_npm_by_board otherlstop_count
--  production_reports_npm_by_board bndstop_count
--  production_reports_npm_by_board tdispense_count
--  production_reports_npm_by_board tpriming_count
--  production_reports_npm_by_board lotboard_count
--  production_reports_npm_by_board lotmodule_count
--  production_reports_npm_by_board mcfwait_count
--  production_reports_npm_by_board mcrwait_count
--  production_reports_npm_by_board caerr_count
--  production_reports_npm_by_board cpwait_count
--  production_reports_npm_by_board mskrecerrstop_count
--  production_reports_npm_by_board mskpstrecerrstop_count
--  production_reports_npm_by_board bprcgstop_count
--  production_reports_npm_by_board sothrstop_count
--  production_reports_npm_by_board pcustop_count
--  production_reports_npm_by_board bestop_count
--  production_reports_npm_by_board twait_count
--  production_reports_npm_by_board hcwait_count
--  production_reports_npm_by_board hswait_count
--  production_reports_npm_by_board pstrecerrstop_count
--  production_reports_npm_by_board total_count
--  production_reports_npm_by_board solvnonstop_count
--  production_reports_npm_by_board spdlenerrstop_time
--  production_reports_npm_by_board spdpstcntupstop_time
--  production_reports_npm_by_board spdpstnonstop_time
--  production_reports_npm_by_board spdpapernonstop_time
--  production_reports_npm_by_board spdmskrecerrstop_time
--  production_reports_npm_by_board spdpstrecerrstop_time
--  production_reports_npm_by_board spdsolvnonstop_time
--  production_reports_npm_by_board spdlenerrstop_count
--  production_reports_npm_by_board spdpstcntupstop_count
--  production_reports_npm_by_board spdpstnonstop_count
--  production_reports_npm_by_board spdpapernonstop_count
--  production_reports_npm_by_board spdmskrecerrstop_count
--  production_reports_npm_by_board spdpstrecerrstop_count
--  production_reports_npm_by_board spdsolvnonstop_count
--  production_reports_npm_by_board spdreccnt_count
--  production_reports_npm_by_board spdprintcnt_count
--  production_reports_npm_by_board spdclncnt_count
--  production_reports_npm_by_board spdpstsupplycnt_count
--  production_reports_npm_by_board spdfbclncnt_count
--  production_reports_npm_by_board spdfbprintcnt_count
--  production_reports_npm_by_board spdrestorationcnt_count
--  production_reports_npm_by_board jwait_time
--  
--  production_reports_npm_hdr_by_board report_id
--  production_reports_npm_hdr_by_board product_id
--  production_reports_npm_hdr_by_board equipment_id
--  production_reports_npm_hdr_by_board start_time
--  production_reports_npm_hdr_by_board end_time
--  production_reports_npm_hdr_by_board setup_id
--  production_reports_npm_hdr_by_board nc_version
--  production_reports_npm_hdr_by_board lane_no
--  production_reports_npm_hdr_by_board job_id
--  production_reports_npm_hdr_by_board trx_productid
--  production_reports_npm_hdr_by_board stage
--  production_reports_npm_hdr_by_board timestamp
--  production_reports_npm_hdr_by_board prev_report_id
-- 
-- select 
--     sum(prn.tpickup) as 'sum(tpickup)',
--     sum(prn.tpmiss) as 'sum(tpmiss)',
--     sum(prn.trmiss) as 'sum(trmiss)',
--     sum(prn.tdmiss) as 'sum(tdmiss)',
--     sum(prn.tmmiss) as 'sum(tmmiss)',
--     sum(prn.thmiss) as 'sum(thmiss)',
--     sum(prn.cmerr_count) as 'sum(cmerr_count)',
--     sum(prn.cderr_count) as 'sum(cderr_count)',
--     sum(prn.cperr_count) as 'sum(cperr_count)',
--     sum(prn.crerr_count) as 'sum(crerr_count)',
--     sum(prn.cterr_count) as 'sum(cterr_count)'
-- from
--     production_reports_npm_hdr prnh
-- inner join
--     production_reports_npm prn
-- on
--     prnh.report_id = prn.report_id
-- where
--     prnh.end_time >= 1425349496
-- and
--     prnh.end_time <= 1425372041
-- go
-- 
-- -- select 
-- --     prhr.end_time,
-- --     prhr.trx_productid
-- -- from
-- --     production_reports_npm_hdr_raw prhr
-- -- order by
-- --     prhr.end_time asc
-- -- go
-- 
-- select 
--     sum(bd.tpickup) as 'sum(tpickup)',
--     sum(bd.tpmiss) as 'sum(tpmiss)',
--     sum(bd.trmiss) as 'sum(trmiss)',
--     sum(bd.tdmiss) as 'sum(tdmiss)',
--     sum(bd.tmmiss) as 'sum(tmmiss)',
--     sum(bd.thmiss) as 'sum(thmiss)',
--     sum(bd.cmerr_count) as 'sum(cmerr_count)',
--     sum(bd.cderr_count) as 'sum(cderr_count)',
--     sum(bd.cperr_count) as 'sum(cperr_count)',
--     sum(bd.crerr_count) as 'sum(crerr_count)',
--     sum(bd.cterr_count) as 'sum(cterr_count)'
-- from
--     production_reports_npm bd
-- go
-- 

-- p_pid   p_eqid  p_lnno  p_min_et        p_max_et
-- 1088    1000    1       1425438673      1425458762
-- 1088    1003    1       1425438673      1425458760
-- 1088    1006    1       1425438683      1425458756
-- 1094    1000    1       1425428808      1425438630
-- 1094    1003    1       1425428808      1425438646
-- 1094    1006    1       1425428806      1425438635
-- z_pid   z_eqid  z_lnno  z_min_et        z_max_et
-- 1088    1000    1       1425438673      1425457401
-- 1088    1003    1       1425438673      1425457512
-- 1088    1006    1       1425438683      1425457657
-- 1094    1000    1       1425430784      1425434940
-- 1094    1003    1       1425430994      1425435408
-- 1094    1006    1       1425431099      1425435469
-- n_pid   n_eqid  n_lnno  n_min_et        n_max_et
-- 1088    1000    1       1425438673      1425457401
-- 1088    1003    1       1425438673      1425457512
-- 1088    1006    1       1425438683      1425457657
-- 1094    1000    1       1425430784      1425434940
-- 1094    1003    1       1425430994      1425435408
-- 1094    1006    1       1425431099      1425435469
-- pid     eqid    lnno    min_et  max_et
-- 1088    1000    1       1425438673      1425458762
-- 1088    1003    1       1425438673      1425458760
-- 1088    1006    1       1425438683      1425458756
-- 1094    1000    1       1425428808      1425438630
-- 1094    1003    1       1425428808      1425438646
-- 1094    1006    1       1425428806      1425438635
-- pid     lnno    min_et  max_et
-- 1088    1       1425438673      1425458762
-- 1094    1       1425428806      1425438646
-- lnno    min_et  max_et
-- 1       1425428806      1425458762

-- mrumore:cim8.5.0.5.P2:orig> ./vietnam.times.sh
-- + env TZ=Asia/Vientiane date -d '2015-03-04 08:00:00' +%s
-- 1425430800
-- + env TZ=Asia/Vientiane date -d '2015-03-04 15:45:00' +%s
-- 1425458700
-- + env TZ=Asia/Vientiane date -d '2015-03-04 08:05:01' +%s
-- 1425431101
-- + env TZ=Asia/Vientiane date -d '2015-03-04 09:23:07' +%s
-- 1425435787
-- + env TZ=Asia/Vientiane date -d '2015-03-04 11:03:52' +%s
-- 1425441832
-- + env TZ=Asia/Vientiane date -d '2015-03-04 15:32:55' +%s
-- 1425457975
-- + env TZ=Asia/Vientiane date -d@1425428806
-- Wed Mar  4 07:26:46 ICT 2015
-- + env TZ=Asia/Vientiane date -d@1425438646
-- Wed Mar  4 10:10:46 ICT 2015
-- + date -d '2015-03-04 08:00:00' +%s
-- 1425477600
-- + date -d '2015-03-04 15:45:00' +%s
-- 1425505500
-- + date -d '2015-03-04 08:05:01' +%s
-- 1425477901
-- + date -d '2015-03-04 09:23:07' +%s
-- 1425482587
-- + date -d '2015-03-04 11:03:52' +%s
-- 1425488632
-- + date -d '2015-03-04 15:32:55' +%s
-- 1425504775
-- + date -d@1425428806
-- Tue Mar  3 18:26:46 CST 2015
-- + date -d@1425438646
-- Tue Mar  3 21:10:46 CST 2015
-- + exit 0

select 
    -- prnh.report_id,
    prnh.product_id,
    prnh.equipment_id,
    -- prnh.start_time,
    -- prnh.end_time,
    -- prnh.setup_id,
    -- prnh.nc_version,
    prnh.lane_no,
    -- prnh.job_id,
    -- prnh.trx_productid,
    -- prnh.stage,
    -- prnh.timestamp,
    -- prnh.prev_report_id,
    sum(prn.board) as 'sum(board)',
    sum(prn.tpickup) as 'sum(tpickup)',
    sum(prn.tpmiss) as 'sum(tpmiss)',
    sum(prn.trmiss) as 'sum(trmiss)',
    sum(prn.tdmiss) as 'sum(tdmiss)',
    sum(prn.tmmiss) as 'sum(tmmiss)',
    sum(prn.thmiss) as 'sum(thmiss)',
    sum(prn.cmerr_count) as 'sum(cmerr_count)',
    sum(prn.cderr_count) as 'sum(cderr_count)',
    sum(prn.cperr_count) as 'sum(cperr_count)',
    sum(prn.crerr_count) as 'sum(crerr_count)',
    sum(prn.cterr_count) as 'sum(cterr_count)'
from
    production_reports_npm_hdr prnh
inner join
    production_reports_npm prn
on
    prnh.report_id = prn.report_id
inner join
    product_data pd
on
    prnh.product_id = pd.product_id
where
    pd.product_name = 'LUNABEST_4074228'
and
-- pid     lnno    min_et  max_et
-- 1088    1       1425438673      1425458762
-- 1094    1       1425428806      1425438646
    -- prnh.end_time >= 1425428806
-- and
    -- prnh.end_time <= 1425438646
--
-- + env TZ=Asia/Vientiane date -d '2015-03-04 08:00:00' +%s
-- 1425430800
-- + env TZ=Asia/Vientiane date -d '2015-03-04 15:45:00' +%s
-- 1425458700
-- 
    prnh.end_time >= 1425430800-318
and
    prnh.end_time <= 1425458700-318
-- 
-- + env TZ=Asia/Vientiane date -d '2015-03-04 08:05:01' +%s
-- 1425431101
-- + env TZ=Asia/Vientiane date -d '2015-03-04 09:23:07' +%s
-- 1425435787
--
    -- prnh.end_time >= 1425431101
-- and
    -- prnh.end_time <= 1425435787
group by
    prnh.product_id,
    prnh.equipment_id,
    prnh.lane_no
order by 
    prnh.product_id asc,
    prnh.equipment_id asc,
    prnh.lane_no asc
go

